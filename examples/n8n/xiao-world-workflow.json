{
  "name": "üåç Xiao-World: ‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡∏´‡∏•‡∏≤‡∏¢‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°",
  "nodes": [
    {
      "parameters": {},
      "id": "manual-trigger",
      "name": "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Manual",
      "type": "n8n-nodes-base.manualTrigger",
      "typeVersion": 1,
      "position": [240, 300]
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "feed_id",
              "name": "feed_id",
              "value": "={{ $json.feed_id || '6751234567890abcdef' }}",
              "type": "string"
            },
            {
              "id": "xsec_token",
              "name": "xsec_token",
              "value": "={{ $json.xsec_token || 'your_token_here' }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "id": "set-feed-info",
      "name": "üìù ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Feed ID",
      "type": "n8n-nodes-base.set",
      "typeVersion": 3,
      "position": [460, 300],
      "notes": "‡πÉ‡∏™‡πà Feed ID ‡πÅ‡∏•‡∏∞ Token ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏∂‡∏á"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://host.docker.internal:18060/mcp",
        "authentication": "none",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": []
        },
        "specifyBody": "json",
        "jsonBody": "={\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"get_feed_detail\",\n    \"arguments\": {\n      \"feed_id\": \"{{ $json.feed_id }}\",\n      \"xsec_token\": \"{{ $json.xsec_token }}\"\n    }\n  },\n  \"id\": 1\n}",
        "options": {}
      },
      "id": "get-feed-detail",
      "name": "üì• ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÄ‡∏™‡∏µ‡πâ‡∏¢‡∏ß‡∏´‡∏á‡∏ä‡∏π",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [680, 300],
      "notes": "‡πÄ‡∏£‡∏µ‡∏¢‡∏Å MCP tool: get_feed_detail"
    },
    {
      "parameters": {
        "jsCode": "// ‡πÅ‡∏õ‡∏•‡∏á MCP response ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢\nconst mcpResponse = $input.item.json;\n\n// ‡∏î‡∏∂‡∏á content ‡∏à‡∏≤‡∏Å MCP result\nlet feedData;\ntry {\n  // Parse JSON string ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ\n  const content = mcpResponse.result?.content?.[0]?.text || '{}';\n  feedData = typeof content === 'string' ? JSON.parse(content) : content;\n} catch (e) {\n  feedData = mcpResponse.result || {};\n}\n\n// ‡∏™‡∏£‡πâ‡∏≤‡∏á output ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢\nreturn {\n  json: {\n    feed_id: $json.feed_id,\n    xsec_token: $json.xsec_token,\n    title: feedData.title || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠',\n    content: feedData.content || feedData.desc || '‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤',\n    images: feedData.images || feedData.image_list || [],\n    video: feedData.video || null,\n    tags: feedData.tags || feedData.topics || [],\n    raw_data: feedData\n  }\n};"
      },
      "id": "parse-feed-data",
      "name": "üîß ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [900, 300],
      "notes": "‡πÅ‡∏õ‡∏•‡∏á MCP response ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://host.docker.internal:18060/mcp",
        "authentication": "none",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": []
        },
        "specifyBody": "json",
        "jsonBody": "={\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"publish_to_twitter\",\n    \"arguments\": {\n      \"feed_id\": \"{{ $json.feed_id }}\",\n      \"xsec_token\": \"{{ $json.xsec_token }}\"\n    }\n  },\n  \"id\": 2\n}",
        "options": {}
      },
      "id": "publish-to-twitter",
      "name": "üê¶ ‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÑ‡∏õ Twitter",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1120, 200],
      "notes": "‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡πÑ‡∏õ Twitter"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "http://host.docker.internal:18060/mcp",
        "authentication": "none",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Content-Type",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": []
        },
        "specifyBody": "json",
        "jsonBody": "={\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"tools/call\",\n  \"params\": {\n    \"name\": \"publish_to_facebook\",\n    \"arguments\": {\n      \"feed_id\": \"{{ $json.feed_id }}\",\n      \"xsec_token\": \"{{ $json.xsec_token }}\"\n    }\n  },\n  \"id\": 3\n}",
        "options": {}
      },
      "id": "publish-to-facebook",
      "name": "üìò ‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÑ‡∏õ Facebook",
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.1,
      "position": [1120, 400],
      "notes": "‡πÄ‡∏ú‡∏¢‡πÅ‡∏û‡∏£‡πà‡πÑ‡∏õ Facebook"
    },
    {
      "parameters": {
        "mode": "combine",
        "combineBy": "combineAll",
        "options": {}
      },
      "id": "merge-results",
      "name": "üìä ‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå",
      "type": "n8n-nodes-base.merge",
      "typeVersion": 2.1,
      "position": [1340, 300],
      "notes": "‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°"
    },
    {
      "parameters": {
        "jsCode": "// ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå\nconst allItems = $input.all();\n\nconst results = {\n  feed_info: {\n    feed_id: allItems[0].json.feed_id,\n    title: allItems[0].json.title,\n    content: allItems[0].json.content\n  },\n  publish_results: {\n    twitter: '‡∏£‡∏≠‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå...',\n    facebook: '‡∏£‡∏≠‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå...'\n  },\n  timestamp: new Date().toISOString()\n};\n\n// ‡πÅ‡∏õ‡∏•‡∏á response ‡∏à‡∏≤‡∏Å‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÅ‡∏û‡∏•‡∏ï‡∏ü‡∏≠‡∏£‡πå‡∏°\nfor (let i = 1; i < allItems.length; i++) {\n  const item = allItems[i].json;\n  const result = item.result?.content?.[0]?.text || item.result || {};\n  \n  // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡πá‡∏ô Twitter ‡∏´‡∏£‡∏∑‡∏≠ Facebook\n  if (item.method?.includes('twitter') || i === 1) {\n    results.publish_results.twitter = result;\n  } else if (item.method?.includes('facebook') || i === 2) {\n    results.publish_results.facebook = result;\n  }\n}\n\nreturn {\n  json: results\n};"
      },
      "id": "format-output",
      "name": "‚úÖ ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå",
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [1560, 300],
      "notes": "‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î"
    }
  ],
  "connections": {
    "‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô Manual": {
      "main": [
        [
          {
            "node": "üìù ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Feed ID",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üìù ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Feed ID": {
      "main": [
        [
          {
            "node": "üì• ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÄ‡∏™‡∏µ‡πâ‡∏¢‡∏ß‡∏´‡∏á‡∏ä‡∏π",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üì• ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å‡πÄ‡∏™‡∏µ‡πâ‡∏¢‡∏ß‡∏´‡∏á‡∏ä‡∏π": {
      "main": [
        [
          {
            "node": "üîß ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üîß ‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•": {
      "main": [
        [
          {
            "node": "üê¶ ‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÑ‡∏õ Twitter",
            "type": "main",
            "index": 0
          },
          {
            "node": "üìò ‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÑ‡∏õ Facebook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üê¶ ‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÑ‡∏õ Twitter": {
      "main": [
        [
          {
            "node": "üìä ‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üìò ‡πÇ‡∏û‡∏™‡∏ï‡πå‡πÑ‡∏õ Facebook": {
      "main": [
        [
          {
            "node": "üìä ‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå",
            "type": "main",
            "index": 1
          }
        ]
      ]
    },
    "üìä ‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå": {
      "main": [
        [
          {
            "node": "‚úÖ ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "pinData": {},
  "settings": {
    "executionOrder": "v1"
  },
  "staticData": null,
  "tags": [],
  "triggerCount": 1,
  "updatedAt": "2025-01-07T00:00:00.000Z",
  "versionId": "1"
}
